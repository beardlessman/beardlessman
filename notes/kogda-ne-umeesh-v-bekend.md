---
title: Когда не умеешь в бэкенд
date: 2020-06-21T11:00
layout: layouts/post.njk
---
На днях наткнулся на [пост Александра Соловьева](https://solovyov.net/blog/2020/blog-workflow/) (того самого, у которого крутой доклад про кложуру). Там он рассказывает про воркфлоу своего блогпостинга: пишет заметку в Drafts.app и js-экшоном пушит на Гитхаб. Подумал – тоже хочу так!

Сам Drafts не дает писать кастомные экшены в бесплатной версии, но ведь у меня уже есть маркдаун-редактор для постов. Написан на ноде, умеет засовывать посты в mongodb и бэкапить в файлик. Дело за малым – отправлять это всё в репу блога и пересобирать Eleventy. Приключение на 20 минут. 

К утру вышла такая схема:
* пишем заметку в редакторе
* express обрабатывает текст: вытаскивает заголовок, формирует url будущего поста, ставит дату и специальный тэг
* пушим заметку в репозиторий блога
* вызываем команду для апдейта блога: сходить в нужную директорию, стянуть обновления, пересобрать
* ???
* PROFIT!

В процессе еще наебнул сервак (не надо оказывается вызывать рекурсивный chmod 777 от корня). Штош, потренировался настраивать nginx. Надо бы научится уже в докеры.

В целом, получился эдакий no-code-backend-less проект. Даже вебхуки не понадобились. 

Результатом доволен. Вот эта заметка написана и запушена автоматически. Получилось плюс-минус то же самое, о чем писал и Саша. Ну разве что без синхронизации драфтов между устройствами и без выгрузки в icloud. Зато я могу прикрутить картинки (ну как-нибудь). А Drafts?